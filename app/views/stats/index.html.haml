- cache @stats do
  %h3
    = params[:year]
    Season
  %table.table.table-striped.table-hover
    %thead
      %tr
        %td
        %td Name
        %td Position
        %td.sortable.right= stats_link_to 'Batting Average', 'batting_average desc'
        %td.sortable.right= stats_link_to 'Home Runs', 'home_runs desc'
        %td.sortable.right= stats_link_to 'Runs Batted In', 'rbi desc'
        %td.sortable.right= stats_link_to 'Runs', 'runs desc'
        %td.sortable.right= stats_link_to 'Stolen Bases', 'steals desc'
        %td.sortable.right= stats_link_to 'On-base Plus Slugging', 'ops desc'
    %tbody
      - @stats.each_with_index do |stat, index|
        %tr
          %td= index+1
          %td= render partial: 'detail', locals: {player: stat.player, stat: stat}
          %td= stat.player.position
          %td.right= stat.batting_average
          %td.right= stat.home_runs
          %td.right= stat.rbi
          %td.right= stat.runs
          %td.right= stat.steals
          %td.right= stat.ops
